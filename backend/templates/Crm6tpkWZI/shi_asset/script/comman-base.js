//Prototype
var protoT=function(){var t=[Array,NodeList],e=Object,n=[];t.forEach(function(t){t.prototype.show=function(){for(i=0;i<this.length;i++)this[i].style.display="block"},t.prototype.hide=function(){for(i=0;i<this.length;i++)this[i].style.display="none"},t.prototype.on=function(t,e){for(i=0;i<this.length;i++)this[i].addEventListener(t,e),null==n[this[i]]&&(n[this[i]]=[]),n[this[i]][t]=e},t.prototype.unbind=function(t){var e=t.split(" ");for(i=0;i<this.length;i++){var o=this[i];e.forEach(function(t){o.removeEventListener(t,n[o][t])})}},t.prototype.hover=function(t,e){for(i=0;i<this.length;i++)this[i].addEventListener("mouseenter",t),this[i].addEventListener("mouseleave",e),null==n[this[i]]&&(n[this[i]]=[]),n[this[i]].mouseenter=t,n[this[i]].mouseleave=e},t.prototype.find_el=function(t){var e=[];for(i=0;i<this.length;i++)this[i].nodeType==Node.ELEMENT_NODE&&(e=e.concat([].slice.call(this[i].querySelectorAll(t))));return e},t.prototype.isContains=function(t){for(var i=0;i<this.length;i++)if(this[i]===t)return!0;return!1},t.prototype.getUnique=function(){for(var t=[],i=0;i<this.length;i++)t.isContains(this[i])||t.push(this[i]);return t},t.prototype.addElementClass=function(t){for(var i=0;i<this.length;i++)this[i].classList.add(t)},t.prototype.removeElementClass=function(t){for(var i=0;i<this.length;i++)this[i].classList.remove(t)}}),e.prototype.show=function(){this.style.display="block"},e.prototype.hide=function(){this.style.display="none"},e.prototype.on=function(t,i){this.addEventListener(t,i),null==n[this]&&(n[this]=[]),n[this][t]=i},e.prototype.unbind=function(t){var i=t.split(" "),e=this;i.forEach(function(t){e.removeEventListener(t,n[e][t])})},Array.prototype.removeArrayValue=function(){for(var t,i,e=arguments,n=e.length;n&&this.length;)for(t=e[--n];-1!==(i=this.indexOf(t));)this.splice(i,1);return this}}();
//cmLib
function getCookie(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var l=n[o];" "==l.charAt(0);)l=l.substring(1);if(0==l.indexOf(t))return l.substring(t.length,l.length)}return""}var formatTool={getTools:function(e,t){var n=document.createElement("div");return toolChild="<span class='toolbtn bold'><b>B</b></span>",toolChild+="<span class='toolbtn italic'><i>I</i></span>",toolChild+="<span class='toolbtn underline'><u>U</u></span>",toolChild+="<span class='toolbtn list material-icons'>list</span>",toolChild+="<span class='toolbtn link material-icons'>add_link</span>",toolChild+="<style>.toolbtn{ display:inline-block;vertical-align:top;width:30px;height:30px;font-size:18px;line-height:30px;text-align:center;cursor:pointer;border:0px solid #aaa;}</style>",n.innerHTML=toolChild,n.querySelectorAll(".bold").on("click",function(n){formatTool.restoreSel(e),document.execCommand("bold",!1),t.value=e.innerHTML}),n.querySelectorAll(".italic").on("click",function(n){formatTool.restoreSel(e),document.execCommand("italic",!1),t.value=e.innerHTML}),n.querySelectorAll(".underline").on("click",function(n){formatTool.restoreSel(e),document.execCommand("underline",!1),t.value=e.innerHTML}),n.querySelectorAll(".link").on("click",function(o){n.style.position="relative";var l=document.createElement("div");l.innerHTML="<input style='padding:5px;margin:10px;box-sizing:border-box;width:calc(100% - 20px);' placeholder='Link Url' type='text' value='' /><button type='button' class='blu-btn add' style='margin:10px;' >Add</button><button type='button' class='blu-btn close' style='background-color:#f00;margin:10px;width:50px;padding:8px 0 !important;'>Close</button>",l.setAttribute("style","position:absolute;top:0;border:1px solid #ddd;background-color:#fff;z-index:1000;"),n.appendChild(l),l.querySelector(".close").on("click",function(){l.remove()}),l.querySelector(".add").on("click",function(){formatTool.restoreSel(e),formatTool.setUrl(l.querySelector("input").value),l.remove(),t.value=e.innerHTML})}),n.querySelectorAll(".list").on("click",function(n){formatTool.restoreSel(e),document.execCommand("insertunorderedlist",!1),t.value=e.innerHTML}),n},saveSel:function(){window.getSelection?savedRange=window.getSelection().getRangeAt(0):document.selection&&(savedRange=document.selection.createRange())},restoreSel:function(e){if(e.focus(),null!=savedRange)if(window.getSelection){var t=window.getSelection();t.rangeCount>0&&t.removeAllRanges(),t.addRange(savedRange)}else document.createRange?window.getSelection().addRange(savedRange):document.selection&&savedRange.select()},setUrl:function(e){var t=document.getSelection();document.execCommand("insertHTML",!1,'<a href="'+e+'" target="_blank">'+t+"</a>")}},richEditor=function(e){for(var t=0;t<e.length;++t){var n=e[t].querySelector("textarea");n.style.display="none";var o=document.createElement("div");o.classList.add("rch-editor"),o.contentEditable=!0,o.setAttribute("placeholder",n.getAttribute("placeholder")),e[t].appendChild(o),e[t].insertBefore(formatTool.getTools(o,n),o),o.addEventListener("blur",function(){formatTool.saveSel()}),o.addEventListener("keyup",function(){n.value=this.innerHTML})}},cm_ajax=function(){return window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp},selectUpdate=function(e){e.style.display="none";var t=document.createElement("INPUT");t.type="text",t.placeholder=e.placeholder;var n=t.value=e.getAttribute("data_value"),o=[],l=[];e.parentNode.appendChild(t);var r=[],i=document.createElement("DIV");i.style="position:relative;display:none;",e.parentNode.appendChild(i);var a=document.createElement("DIV");a.style="position:absolute;z-index:1000;border-radius:0.2rem;border:1px solid #000;white-space:nowrap;background-color:white;",a.innerHTML="<div style='padding:10px;min-width:200px;'>Loading...</div>",i.appendChild(a);var c=0;t.onfocus=function(){n=t.value,elmt_value=e.value,o=n.split(","),l=(l=elmt_value.split(",")).sort();for(var i=0;i<l.length;i++)r[o[i]]=l[i]},deleteValue=function(e,t,n){for(var o=e.length,l=[],r=0;r<o;r++)null!=n[e[r]]&&(l[r]=n[e[r]]);return l},t.onblur=function(){c=setTimeout(function(){var n=t.value;i.style.display="none",new_node_arr=n.split(","),l=deleteValue(new_node_arr,l,r),e.value=l.getUnique().sort().toString(),console.log(e.value)},200)},t.addEventListener("keyup",function(){if(i.style.display="block",e.classList.contains("multiple"))var n=t.value.split(","),o=n[n.length-1],l=location.protocol+"//"+location.hostname+"/api/"+e.getAttribute("data_ref")+"/?q="+encodeURIComponent(o);else l=location.protocol+"//"+location.hostname+"/api/"+e.getAttribute("data_ref")+"/?q="+encodeURIComponent(t.value);var u=new XMLHttpRequest;u.addEventListener("load",function(){var n=this.responseText;n.length>3?a.innerHTML=n:a.innerHTML="<div style='padding:10px;min-width:200px;'>No Data</div>",a.querySelectorAll(".cm-select-result").on("click",function(){if(clearTimeout(c),e.classList.contains("multiple")){var n=t.value.split(",");n.pop(),n.push(this.innerText),n=n.getUnique(),t.value=n.toString();var o=e.value.split(",");(o=(o=deleteValue(n,o,r)).filter(function(e){return""!=e})).push(this.getAttribute("value")),o=(o=o.getUnique()).sort(),e.value=o.toString()}else t.value=this.innerText,e.value=this.getAttribute("value");i.style.display="none"})}),u.open("POST",l),u.send()})},filterUpdate=function(e){var t=e.getAttribute("ref"),n=document.querySelector(".cm-filter").querySelector("input[value='"+t+"']");null==n&&null==n||n.removeAttribute("checked"),document.querySelector(".cm-filter").submit()},collegeListHeight=function(){var e=0,t=document.querySelector(".college-list"),n=document.querySelector(".filter");if(t&&n){t.style.minHeight=n.offsetHeight+100+"px";var o=setInterval(function(){t.style.minHeight=n.offsetHeight+100+"px",++e>3&&clearInterval(o)},1e3)}},fadeIn=function(e,t){e.style.opacity=0;var n=+new Date,o=function(){e.style.opacity=+e.style.opacity+(new Date-n)/t,n=+new Date,+e.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()},getStyle=function(e,t){var n,o=(e.ownerDocument||document).defaultView;return o&&o.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),o.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[t],/^\d+(em|pt|%|ex)?$/i.test(n)?function(t){var n=e.style.left,o=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=n,e.runtimeStyle.left=o,t}(n):n):void 0},cm_toggle=function(){for(var e=document.querySelectorAll(".togl_btn"),t=0;t<e.length;++t)e[t].on("click",function(){var e=JSON.parse(this.getAttribute("data_value")),t=document.querySelectorAll("."+this.getAttribute("ref"));this.innerText==e[0]?this.innerText=e[1]:this.innerText=e[0];for(var n=0;n<t.length;++n)"none"==getStyle(t[n],"display")?t[n].style.display="block":t[n].style.display="none"})},searchClickRedirect=function(e){e.parentNode.querySelectorAll("input")[1].addEventListener("keyup",function(){var t=this;setTimeout(function(){t.parentNode.querySelectorAll(".cm-select-result").on("click",function(){window.location=e.getAttribute("action")+this.getAttribute("value")})},500)})},loginPopUp=function(e=!1){0!=e&&(eloldtext=e.innerHTML,e.disabled=!0,e.innerText="Wait...");var t=encodeURIComponent(window.location.protocol+"//"+window.location.hostname+window.location.pathname+window.location.hash);$cm.popup({type:"url",value:window.location.protocol+"//"+window.location.hostname+"/auth/popuplogin/?ajx=1&redirect="+t},function(){return 0!=e&&(e.innerHTML=eloldtext,e.removeAttribute("disabled")),!1})},registerPopUp=function(e=!1){0!=e&&(eloldtext=e.innerHTML,e.disabled=!0,e.innerText="Wait...");var t=encodeURIComponent(window.location.protocol+"//"+window.location.hostname+window.location.pathname+window.location.hash);$cm.popup({type:"url",value:window.location.protocol+"//"+window.location.hostname+"/auth/popupregister/?ajx=1&redirect="+t},function(){return 0!=e&&(e.innerHTML=eloldtext,e.removeAttribute("disabled")),!1})};const togglePassword=function(e){"password"===e.type?e.type="text":e.type="password"},togglePassSelector=function(){const e=document.querySelectorAll(".tgl-pass");for(var t=e.length-1;t>=0;t--)e[t].addEventListener("mouseover",function(){this.style.color="#000"}),e[t].addEventListener("mouseout",function(){this.style.color="#aaa"}),e[t].addEventListener("click",function(){var e,t=this.closest("div").querySelector(".pass-tgable");"password"===(e=t).type?e.type="text":e.type="password"})};window.addEventListener("load",function(){for(var e=document.querySelectorAll(".cm-select-input"),t=0;t<e.length;++t){var n=e[t];selectUpdate(n)}null!=document.getElementById("examsearch")&&searchClickRedirect(document.getElementById("examsearch")),null!=document.getElementById("questionsearch")&&(console.log(document.getElementById("questionsearch")),searchClickRedirect(document.getElementById("questionsearch")));var o=document.querySelectorAll("button");for(t=0;t<o.length;++t)o[t].parentNode.style.textDecoration="none";var l=document.querySelectorAll("input");for(t=0;t<l.length;++t)l[t].title||(l[t].title=l[t].placeholder);cm_toggle(),document.querySelectorAll(".cm-filter input").on("change",function(){document.querySelector(".cm-filter").submit()}),document.querySelectorAll(".filterUpdate").on("click",function(){filterUpdate(this)}),collegeListHeight();var r=function(){document.querySelectorAll(".cm-search.active input").on("keyup",function(e){if(27==e.keyCode)return e.preventDefault(),window.location.hash="",this.closest(".popupurl").remove(),getPopUpUrlCreated=0,!1;var t=this.value,n=this.getAttribute("stype");if(n=n||!1,""!=t){var o=0!=n?"/search/"+n+"/"+t+"/":"/search/"+t+"/",l=new XMLHttpRequest;l.onreadystatechange=function(){4==this.readyState&&200==this.status&&(document.getElementById("search-results").innerHTML=l.responseText,window.location.hash=o)},l.open("GET",o+"?ajx=1",!0),l.send()}})};r(),document.querySelectorAll(".cm-search:not(.active) input").on("keyup",function(e){if(27==e.keyCode)return e.preventDefault(),this.classList.remove("active"),!1;el=this;var t=this.value;url="/search/"+t+"/",document.querySelector(".cm-nav").classList.toggle("active",!1),document.querySelector("header").classList.toggle("active",!1),document.querySelector("body").classList.toggle("hdn",!1),getPopUpUrl(url,!1,function(){var e=el.value;document.querySelector(".cm-search.active input").focus(),document.querySelector(".cm-search.active input").value="",document.querySelector(".cm-search.active input").value=e,el.value="",r()},!1)});var i=function(e){document.querySelectorAll(".cm-banner-main .bnnr-thumb").forEach(function(e){e.style.opacity=.5}),e.style.opacity=1;var t=document.querySelector(".cm-banner-main"),n=window.atob(e.getAttribute("ref"));n=JSON.parse(n),fadeIn(t.querySelector(".bnnr-slide"),500),fadeIn(t.querySelector(".bnnr-text"),1e3),t.querySelector(".bnnr-slide").src=n.images,t.querySelector(".bnnr-link").href=n.path,t.querySelector(".bnnr-text h2").innerText=n.name,t.querySelector(".bnnr-text span:nth-child(3)").innerText=n.text},a=(t=1,setInterval(function(){t=4==t?0:t;var e=document.querySelectorAll(".cm-banner-main .bnnr-thumb")[t];e?i(e):clearInterval(a),++t},5e3));document.querySelectorAll(".cm-banner-main .bnnr-thumb").on("click",function(){clearInterval(a);var e=Array.prototype.slice.call(document.querySelectorAll(".cm-banner-main .bnnr-thumb"));t=e.indexOf(this),i(this),a=setInterval(function(){t=4==t?0:t;var e=document.querySelectorAll(".cm-banner-main .bnnr-thumb")[t];i(e),++t},5e3)}),document.querySelectorAll(".admin-mobile-menu").on("click",function(){document.querySelector("header").classList.toggle("active")})});
//FormInput
var ratingInput=function(){document.querySelectorAll(".rating-input span").on("click",function(){for(var e=this.parentNode,t=this.getAttribute("ref"),n=e.querySelectorAll("span"),r=e.querySelector("input"),l=e.querySelector("i"),u=parseInt(r.getAttribute("max")),o=0;o<n.length;++o)n[o].style.color="black";for(o=0;o<parseInt(t);++o)n[o].style.color="green";l.innerText=t+" / "+u,r.value=t})},formLabel=function(){document.querySelectorAll("input, select, textarea").on("focus",function(){null!=this.parentNode.querySelector("label")&&this.parentNode.querySelector("label").classList.add("active")}),document.querySelectorAll("input, select, textarea").on("blur",function(){null!=this.parentNode.querySelector("label")&&this.parentNode.querySelector("label").classList.remove("active")})},NumberMaxLength=function(){document.querySelectorAll("input").on("keyup",function(){if("number"==this.type&&this.hasAttribute("maxlength")){var e=this.value,t=this.value.length,n=parseInt(this.getAttribute("maxlength"));n<t&&(this.value=e.slice(0,-1*(t-n)))}})},formInputs=function(){ratingInput(),formLabel(),NumberMaxLength()};window.addEventListener("load",function(){formInputs()});
//AjaxForm
var ajxform=function(e,t=requestResponce,r=function(){},o=function(){},n=function(){}){var a=[],l=e.querySelectorAll(".b_submit");for(z=0;z<l.length;++z)a[z]=l[z].innerText,l[z].disabled="true",l[z].innerText="Processing...";var s=e.action,i=new FormData,c=e.querySelectorAll("input, select, textarea"),u=e.querySelectorAll(".input-err");for(z=0;z<u.length;++z)u[z].remove();for(i.append("request-method","ajax"),z=0;z<c.length;++z)if(c[z].classList.remove("input-m-err"),"file"==c[z].type)if(c[z].files.length>1)for(var d=c[z].files.length-1;d>=0;d--)c[z].name=c[z].name.replace("[]",""),i.append(c[z].name+"[]",c[z].files[d]);else i.append(c[z].name,c[z].files[0]);else"checkbox"==c[z].type||"radio"==c[z].type?c[z].checked&&i.append(c[z].name,c[z].value):i.append(c[z].name,c[z].value);var p=new XMLHttpRequest;p.addEventListener("load",function(){for(z=0;z<l.length;++z)l[z].removeAttribute("disabled"),l[z].innerText=a[z];t(this,e,l)}),p.addEventListener("progress",r),p.addEventListener("error",o),p.addEventListener("abort",n),p.open("POST",s),p.send(i)},requestResponce=function(e,t,l){responseValue=e.responseText,console.log(responseValue);var r=JSON.parse(responseValue);if("notice"==r.status)noticeResponceHandler(r,t,l);else if("error"==r.status)errorResponceHandler(r,t);else{if(r.value.update_form_values){var o=r.value.update_form_values;for(const[e,r]of Object.entries(o))t.querySelector("input[name="+e+"], select[name="+e+"], textarea[name="+e+"]").value=r}sucessResponceHandler(r,l)}},updateState=function(e,t){if(void 0!==history.pushState){var r={Title:e,Url:t};history.pushState(r,r.Title,r.Url)}else console.log("Browser does not support HTML5.")},sucessResponceHandler=function(e,l){e.value&&e.value.redirect&&(e.value.redirect_behave&&1==e.value.redirect_behave?redirectPost(e.value.redirect,e.value,l,10):0==e.value.redirect_behave&&updateState("Editor",e.value.redirect))},redirectPost=function(e,t,l,tm=5000){var a = [];for(z=0;z<l.length;++z)a[z]=l[z].innerText,l[z].disabled="true";setTimeout(()=>{if(t.redirect_type)window.location.href=e.split("#")[0];else{var r=document.createElement("form");for(var o in document.body.appendChild(r),r.method="post",r.action=e,t)if(t.hasOwnProperty(o)){var n=document.createElement("input");n.type="hidden",n.name=o,n.value=t[o],r.appendChild(n)}r.submit()}},tm);},errorResponceHandler=function(e,t){for(var r=0;r<e.value.length;++r){var o=e.value[r];"global"==o.scope?createErrorGlobalNode(o.value):"input"==o.scope&&(createErrorGlobalNode(o.value),createErrorInputNode(o.input,t))}},noticeResponceHandler=function(e,t,l){t.closest(".simple-popup")&&null!=t.closest(".simple-popup")&&t.closest(".simple-popup").remove();for(var r=0;r<e.value.length;++r){var o=e.value[r];"global"==o.scope?createNoticeGlobalNode(o.value.msg):"input"==o.scope&&(createNoticeGlobalNode(o.value.msg),createNoticeInputNode(o.input,t)),o.value.redirect_behave&&1==o.value.redirect_behave&&setTimeout(function(){redirectPost(o.value.redirect,o.value,l)},100)}},createNoticeGlobalNode=function(e){var t=document.querySelectorAll(".glob-notice"),r=document.createElement("div");r.classList.add("glob-notice"),r.innerHTML="<div>"+e+" <span class='dismiss'>Dismiss</span></div>",r.style.bottom=3*t.length+"px",r.style.left=3*t.length+"px",document.body.appendChild(r);var o=setTimeout(function(){r.remove()},15e3);r.querySelectorAll(".dismiss").on("click",function(){clearTimeout(o),r.remove()})},createErrorGlobalNode=function(e){var t=document.querySelectorAll(".glob-err"),r=document.createElement("div");r.classList.add("glob-err"),r.innerHTML="<div>"+e+" <span class='dismiss'>Dismiss</span></div>",r.style.bottom=3*t.length+"px",r.style.left=3*t.length+"px",document.body.appendChild(r);var o=setTimeout(function(){r.remove()},5e3);r.querySelectorAll(".dismiss").on("click",function(){clearTimeout(o),r.remove()})},createErrorInputNode=function(e,t){var r=document.createElement("div");r.classList.add("input-err");var o=Object.keys(e);r.innerHTML="<div>"+e[o]+"</div>";var n=t.querySelector('input[name="'+o+'"]')||t.querySelector('select[name="'+o+'"]')||t.querySelector('textarea[name="'+o+'"]');n.classList.add("input-m-err"),n.after(r),n.on("focus",function(){n.classList.remove("input-m-err"),r.remove()})};window.addEventListener("load",function(){document.querySelectorAll("form").on("submit",function(e){if(this.classList.contains("nx-form"))return!0;e.preventDefault(),ajxform(this)});formLabel()});
//URLPOP
var getPopUpUrlCreated=0,getPopUpUrl=function(o,e=!1,t=!1,n=!0){var l,r,p=new XMLHttpRequest;oNodef=function(){if(document.querySelectorAll(".popupurl").length>0)return document.querySelectorAll(".popupurl")[0];oNodef()},l=document.querySelectorAll(".popupurl"),1==getPopUpUrlCreated?r=l?l[0]:oNodef():((r=document.createElement("div")).classList.add("popupurl"),0!=e&&r.classList.add(e),getPopUpUrlCreated=1),null!=r&&(r.innerHTML="<div class='close'>Close</div><div>Loading....</div>",p.addEventListener("load",function(){window.location.hash=encodeURI(o.replace(window.location.hostname,"").replace(window.location.protocol+"//","popup"));var e=this.responseText;r.innerHTML="<div class='close'>✕</div>",r.innerHTML=r.innerHTML+e,document.body.appendChild(r),r.querySelectorAll(".close").on("click",function(){window.location.hash="";var o=function(e){var t=e.parentNode;t.classList.contains("popupurl")?t.remove():o(t)};o(this),getPopUpUrlCreated=0});for(var n=r.querySelectorAll(".cm-select-input"),l=0;l<n.length;++l){var p=n[l];selectUpdate(p)}r.querySelectorAll("form").on("submit",function(o){o.preventDefault(),ajxform(this)}),formInputs(),t&&"[object Function]"==={}.toString.call(t)&&t()}),p.open("POST",o,!0),p.setRequestHeader("Content-type","application/x-www-form-urlencoded"),1==n?p.send("ajx=1"):p.send())};window.addEventListener("load",function(){if(document.querySelectorAll("a.popurl").on("click",function(o){o.preventDefault();var e=this.href;getPopUpUrl(e)}),window.location.hash){var o=window.location.hash;o.startsWith("#popup")&&(console.log(o.replace("#popup",window.location.protocol+"//"+window.location.hostname)),getPopUpUrl(o.replace("#popup",window.location.protocol+"//"+window.location.hostname)))}});
//SimplePOP
var $cm={};!function(){const e=function(e,c=function(){}){"url"==e.type?t(e.value,c):"html"==e.type?n(e.value,c):"image"==e.type&&o(e.value,c)},n=function(e,n=function(){}){var t=document.createElement("div");t.classList.add("simple-popup"),t.innerHTML+="<div class='simple-pop-cont'><div class='close'><span class='material-icons'>close</span></div>"+e+"</div>",t.querySelectorAll(".close").on("click",function(){setInterval(function(){t.remove()},200)}),document.body.appendChild(t),t.querySelectorAll("form").on("submit",function(e){e.preventDefault(),ajxform(this)}),formInputs(),selectInputV2(),togglePassSelector(),n(t)},t=function(e,t=function(){}){const o=cm_ajax();o.addEventListener("load",function(){n(this.responseText,t)}),o.open("GET",e),o.send()},o=function(e,t=function(){}){n('<img width="100%" src=\''+e+"'>",t)};$cm.popup=e,window.addEventListener("load",function(){var n=document.createElement("link");n.rel="stylesheet",n.href=window.location.protocol+"//"+window.location.hostname+"/style/simplepopup.css?v=1",document.body.appendChild(n),document.querySelectorAll(".cm-simple-popup").on("click",function(n){n.preventDefault(),e(JSON.parse(this.getAttribute("ref")))})})}();
//Alert
!function(){const e=function(e,t="alert",n=!1){0==n&&(n=t);var l=document.createElement("div");l.style.top="0",l.style.bottom="0",l.style.left="0",l.style.right="0",l.style.zIndex="2000",l.style.position="fixed",l.style.backgroundColor="#0005";var o=document.createElement("div");o.style.position="fixed",o.style.backgroundColor="#fff",o.style.zIndex="2000",o.style.border="1px solid #aaa",o.style.top="50%",o.style.left="50%",o.style.transform="translate(-50%, -50%)",o.style.width="500px",o.style.minHeight="100px",o.style.maxWidth="95%";var i=document.createElement("div");if(i.style.minHeight="10px",i.style.backgroundColor="#fff",i.style.textAlign="right",i.style.padding="5px",i.style.fontSize="20px",i.style.cursor="pointer",o.appendChild(i),l.appendChild(o),i.innerHTML="<div class='close'><span class='material-icons'>close</span><div style='float:left;font-size:16px;'>"+n.toUpperCase()+"<div></div>",window.dialogBox=l,document.body.appendChild(l),"alert"==t)o.innerHTML+="<div style='padding:20px;font-size:15px;'>"+e+"</div>",o.querySelector(".close").addEventListener("click",()=>{dialogBox.remove(),delete dialogBox});else if("prompt"==t){return new Promise(function(t,n){if(e.length>0){inputBox=[];for(var l=e.length-1;l>=0;l--)inputBox[l]="<label style='display:none;'>"+e[l].name.toUpperCase()+"</label><input placeholder='"+e[l].name.toUpperCase()+"' style='padding:15px;width:100%;margin:5px 0;box-sizing:border-box;' name='"+e[l].name+"' value='' />";o.innerHTML+="<div style='padding:20px;font-size:15px;'>"+inputBox.join("<br />")+"<br /><button style='margin:5px;' class='gld-btn submit'>Continue</button><button style='margin:5px;' class='gld-btn cancel'>Cancel</button></div>"}else o.innerHTML+="<div style='padding:20px;font-size:15px;'><button class='gld-btn submit' style='display:none;' disabled>Continue</button><button class='gld-btn  cancel'>Cancel</button></div>";o.querySelector(".close").addEventListener("click",()=>{dialogBox.remove(),delete dialogBox,n(null)}),o.querySelector(".submit").addEventListener("click",()=>{dialogBox.remove(),delete dialogBox;var e=o.querySelectorAll("input");if(e.length>0){for(var l=[],i=e.length-1;i>=0;i--)l[i]=e[i].name+"="+e[i].value;t(l.join("&"))}else n(null)}),o.querySelector(".cancel").addEventListener("click",()=>{dialogBox.remove(),delete dialogBox,n(null)})})}};window.dialog=e,window.promtdialog=function(t,n=!1){return new Promise(function(l,o){"undefined"!=typeof dialogBox?dialogBox.querySelector(".close").addEventListener("click",()=>{setTimeout(function(){let i=e(t,"prompt",n);console.log(i),i.then(function(e){l(e)},function(e){o(null)})},1e3)}):e(t,"prompt",n).then(function(e){l(e)},function(e){o(null)})})}}();
//SelectInputV2
!function(){const e=document.querySelectorAll(".cm-select-input-v2"),t=function(e){return null!=e&&"function"==typeof e[Symbol.iterator]},a=function(){const e=document.createElement("div");return e.setAttribute("style","position:relative;"),e.classList.add("selectInput-v2-data"),e.innerHTML="<input class='select-input'/>",e.querySelector(".select-input").addEventListener("focus",function(){this.parentNode.parentNode.querySelector("label").classList.add("active"),this.parentNode.querySelector(".select-values-cont").classList.add("active")}),e.querySelector(".select-input").addEventListener("blur",function(){this.parentNode.parentNode.querySelector("label").classList.remove("active"),this.parentNode.querySelector(".select-values-cont").classList.remove("active")}),e},n=function(){const e=this;setTimeout(function(){null!=e.parentNode&&e.parentNode.querySelector(".select-options").classList.remove("active")},300)},s=function(e){var t;t=""!=e.getAttribute("data_value")?JSON.parse(e.getAttribute("data_value")):{};const a=e.parentNode.querySelector(".selectInput-v2-data");a.querySelector(".select-input").remove();var s=[],r="";r+="<input class='select-input' placeholder='' />",r+="<div class='select-values-cont' style='background-color:#ddd;border:1px solid #aaa;position:absolute;width:100%;box-sizing:border-box;z-index:1000;'>";for(const e in t)t.hasOwnProperty(e)&&(r+="<span class='select-values' ref='"+e+"' style=\"display:block;padding:5px 10px;margin:5px 5px;background-color:#ddd;line-height:10px;\"><span class='select-value'>"+t[e]+"</span>  <span class='remove' style='float:right;color:red;cursor:pointer;'>x</span></span>",s.push(t[e]));r+="</div>",a.innerHTML=r,s.length>0?a.querySelector(".select-input").placeholder=s.join(", "):a.querySelector(".select-input").placeholder=e.placeholder,a.querySelector(".select-input").addEventListener("keyup",function(){var t=this;const a=this.value,s=JSON.parse(atob(e.getAttribute("data_ref")));var o="v="+a;o+="&t="+s.t,o+="&i="+s.i,o+="&f="+s.f,o+="&k="+s.k,e.hasAttribute("data_deep")&&(dataDeep=JSON.parse(atob(e.getAttribute("data_deep"))),o+="&fdd="+dataDeep.f,o+="&vdd="+e.closest("form").querySelector("."+dataDeep.i).value);const r=cm_ajax();r.onreadystatechange=function(){if(4==this.readyState&&200==this.status){if(t.parentNode.querySelector(".select-options"))var a=t.parentNode.querySelector(".select-options");else(a=document.createElement("div")).style="position:absolute;z-index:1100;max-height:500px;overflow:auto;width:100%;border:1px solid #aaa;",a.classList.add("select-options");console.log(r.responseText);const s=JSON.parse(r.responseText);var n="";0==s.length&&(n+="<div style='padding:5px 10px;background-color:white;cursor:pointer;line-height: 0.9rem;'>No Values to Select</div>");for(const e in s)s.hasOwnProperty(e)&&(n+="<div style='padding:5px 10px;background-color:white;cursor:pointer;line-height: 0.9rem;' value='"+JSON.stringify({key:e,value:s[e]})+"'>"+s[e]+"</div>");a.innerHTML=n,a.classList.add("active"),t.parentNode.appendChild(a),a.querySelectorAll("div").forEach(function(t,a){t.addEventListener("click",function(){l(JSON.parse(this.getAttribute("value")),e)})})}},r.open("GET","/api/getjsondata/?"+o,!0),r.send(),this.removeEventListener("blur",n),this.addEventListener("blur",n)}),a.querySelector(".select-input").addEventListener("focus",function(){this.parentNode.parentNode.querySelector("label").classList.add("active"),this.parentNode.querySelector(".select-values-cont").classList.add("active"),this.placeholder=""}),a.querySelector(".select-input").addEventListener("blur",function(){this.parentNode.parentNode.querySelector("label").classList.remove("active"),this.parentNode.querySelector(".select-values-cont").classList.remove("active"),s.length>0?this.placeholder=s.join(", "):this.placeholder=e.placeholder}),a.querySelectorAll(".select-values-cont>span>span.remove").on("mousedown",function(){o(this,e)})},o=function(e,t){var a,n=","+t.value.replace(/\s/g,"")+",",o=e.closest(".select-values").getAttribute("ref");delete(a=""!=t.getAttribute("data_value")?JSON.parse(t.getAttribute("data_value")):{})[o],t.setAttribute("data_value",JSON.stringify(a));var l=n.replace(","+o+",",",").substring(1).slice(0,-1);t.value=l,s(t)},l=function(e,t){if(1==t.classList.contains("multiple")){t.value.replace(/\s/g,"");n=""!=t.getAttribute("data_value")&&"[]"!=t.getAttribute("data_value")?JSON.parse(t.getAttribute("data_value")):{},console.log(n),n[e.key]=e.value,t.setAttribute("data_value",JSON.stringify(n));var a=Object.keys(n).join(",")}else{var n;(n={})[e.key]=e.value,t.setAttribute("data_value",JSON.stringify(n));a=e.key}t.value=a,s(t)},r=function(e){t(e)?e.forEach(function(e,t){s(e)}):s(e)},i=function(e){t(e)?e.forEach(function(e,t){e.style.display="none"}):e.style.display="none"},c=function(e){var n;t(e)?e.forEach(function(e,t){null==e.parentNode.querySelector(".selectInput-v2-data")&&(n=a(),e.parentNode.appendChild(n))}):(n=a(),e.parentNode.appendChild(n))},u=function(){const e=document.createElement("style");e.innerHTML=".select-value{line-height:0.9rem;font-size:15px;} .cm-select-input-v2{display: none !important;} .select-values-cont{ display: none;} .select-values-cont.active{display: block;} .select-options{display: none;font-size:13px;} .select-options.active{display: block;} .select-options>div:hover{background-color: #ddd !important;}",document.head.appendChild(e)};window.selectInputV2=function(){const e=document.querySelectorAll(".cm-select-input-v2");u(),i(e),c(e),r(e)},u(),i(e),c(e),r(e)}();